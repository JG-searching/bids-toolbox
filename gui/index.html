<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="brain_logo_q1Z_icon.ico">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>The BIDS Toolbox</title>

    <!-- Bootstrap core CSS -->
    <link href="https://getbootstrap.com/docs/4.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="template.css" rel="stylesheet">
  </head>

  <body>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>

	<script>

	$(document).ready(function () {
	    var scan_counter = 0;
	    var desc_counter = 0;

	    $("#scan_addrow").on("click", function () {
		var newRow = $("<tr>");
		var cols = "";

		cols += '<td><input type="text" class="form-control" name="scan_name' + scan_counter + '"/></td>';
		cols += '<td> <select id="scan_type' + scan_counter + '" class="form-control"> <option selected>func</option> <option>dwi</option> <option>fmap</option> <option>anat</option> <option>meg</option> </select> </td>';
		cols += '<td><input type="text" class="form-control" name="scan_type' + scan_counter + '"/></td>';

		cols += '<td><input type="button" class="ibtnDel btn btn-md btn-danger "  value="Delete"></td>';
		newRow.append(cols);
		$("#scan_types_table").append(newRow);
		scan_counter++;
	    });

	    $("#desc_addrow").on("click", function () {
		var newRow = $("<tr>");
		var cols = "";

		cols += '<td><input type="text" class="input-sm form-control" name="desc_key' + desc_counter + '"/></td>';
		cols += '<td><input type="text" class="input-sm form-control" name="desc_value' + desc_counter + '"/></td>';

		cols += '<td><input type="button" class="ibtnDel btn btn-md btn-danger "  value="Delete"></td>';
		newRow.append(cols);
		$("#desc_table").append(newRow);
		desc_counter++;
	    });

	    $("#desc_table").on("click", ".ibtnDel", function (event) {
		$(this).closest("tr").remove();       
		desc_counter -= 1
	    });

	    $("#scan_types_table").on("click", ".ibtnDel", function (event) {
		$(this).closest("tr").remove();       
		scan_counter -= 1
	    });

	});

	function calculateRow(row) {
	    var price = +row.find('input[name^="price"]').val();
	}

	function calculateGrandTotal() {
	    var grandTotal = 0;
	    $("table.order-list").find('input[name^="price"]').each(function () {
		grandTotal += +$(this).val();
	    });
	    $("#grandtotal").text(grandTotal.toFixed(2));
	}
	</script>

    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top"> 
      <a class="navbar-brand" href="https://www.cardiff.ac.uk/cardiff-university-brain-research-imaging-centre">Cardiff University Brain Research Imaging Centre (CUBRIC)</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
      </button>
    </nav>

    <main role="main" class="container">

      <div class="starter-template">
    	<img src="brain_logo.png" class="img-rounded" alt="Brain logo here" height="60" width="60" > 
        <h1>The BIDS Toolbox</h1>
        <p class="lead">
	 Use this tool to create and manage Brain Imaging Data Structure (BIDS) datasets.<br>
	 Choose between the options below to start. Learn more about BIDS <a href="http://bids.neuroimaging.io">here</a>. 
	</p>

      </div>

<!--Control to select folder instead of file from:  https://stackoverflow.com/questions/12942436/how-to-get-folder-directory-from-html-input-type-file-or-any-other-way -->

	<h4>Create dataset</h4>

	Use this section to create a BIDS dataset from DICOM files.<br><br>

	<form>
	  <h5> Dataset folders: </h5>

	  <div class="form-group">
	    <label for="exampleFormControlFile1">Select root folder for DICOM files: </label>
	    <input type="file" id="dicom_folder" webkitdirectory directory multiple/>
	  </div>

	  <div class="form-group">
	    <label for="exampleFormControlFile1">Select output folder for BIDS dataset: </label>
	    <input type="file" id="output_folder" webkitdirectory directory multiple/>
	  </div>

	  <h5> Metadata </h5>
	  <b> Dataset description </b>

	<div class="container">
	    <table id="desc_table" class=" table order-list">
	    <thead>
		<tr>
		    <td>Key</td>
		    <td>Value</td>
		</tr>
	    </thead>
	    <tbody>
		<tr>
		    <td>
			<input type="text" name="desc_key" class="input-sm form-control" />
		    </td>
		    <td>
			<input type="text" name="desc_value"  class="input-sm form-control"/>
		    </td>
		    <td><a class="deleteRow"></a>

		    </td>
		</tr>
	    </tbody>
	    <tfoot>
		<tr>
		    <td colspan="5" style="text-align: left;">
			<input type="button" class="btn btn-lg btn-block " id="desc_addrow" value="Add Row" />
		    </td>
		</tr>
		<tr>
		</tr>
	    </tfoot>
	</table>
	</div>

	  <b> Scan types </b>

<!-- Dynamic table from: https://bootsnipp.com/snippets/402bQ -->

	<div class="container">
	    <table id="scan_types_table" class=" table order-list">
	    <thead>
		<tr>
		    <td>Name</td>
		    <td>Scan type</td>
		    <td>Scan modality</td>
		</tr>
	    </thead>
	    <tbody>
		<tr>
		    <td>
			<input type="text" name="scan_name" class="input-sm form-control" />
		    </td>
		    <td>
		      <select id="scan_type" class="form-control">
			<option selected>func</option>
			<option>dwi</option>
			<option>fmap</option>
			<option>anat</option>
			<option>meg</option>
		      </select>
		    </td>
		    <td>
			<input type="text" name="scan_type"  class="input-sm form-control"/>
		    </td>
		    <td><a class="deleteRow"></a>

		    </td>
		</tr>
	    </tbody>
	    <tfoot>
		<tr>
		    <td colspan="5" style="text-align: left;">
			<input type="button" class="btn btn-lg btn-block " id="scan_addrow" value="Add Row" />
		    </td>
		</tr>
		<tr>
		</tr>
	    </tfoot>
	</table>
	</div>

	  <button type="submit" class="btn btn-primary">Create dataset</button>
	</form>

	<br><br>
	<small>
	The BIDS Toolbox is part of the <i>Microstructural Imaging Data Centre (MIDaC)</i> project, grant reference ST/S00209X/1, funded by the Science and Technology Facilities Council (STFC) of the UK.  
	</small>
	<br><br>

    </main><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://getbootstrap.com/docs/4.0/assets/js/vendor/popper.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.0/dist/js/bootstrap.min.js"></script>
  </body>
</html>

